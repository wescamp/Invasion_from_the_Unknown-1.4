Invasion from the Unknown - changelog
-------------------------------------
[B]: backport from trunk

THIS BRANCH IS OBSOLETE. FOR THE LATEST STABLE WORK ON IFTU YOU
SHOULD USE THE TRUNK VERSION, OR 1.6 BRANCH, WHEN IT BECOMES
AVAILABLE.

Version 1.9.99:
- Graphics:
    - New portraits [B]: Anlindë, Elynia, Igor, Lédinor, Elyssa,
                         Erathan, Althurin, Mal Keshar, Galas,
                         King Asthorgar.

- Scrapped Wose Shaman unit entirely.

- Scenarios:
    - 23B (Welcome to the Lair of the Shadow Master):
        - Fixed Argan's dead image being put at a more-often-than-not
          invalid location (X=argan's x : Y=attacker's x)       [B]

- Units:
    - Balancing:
        - Reduced Elvish Hunter's HP from 30 to 29.             [B]
        - Reduced Elvish Prowler's HP from 66 to 62.            [B]
        - Reduced Elvish Trapper's HP from 44 to 43.            [B]
        - Reduced Elvish Warrior Spirit's HP from 18 to 16.     [B]
        - Removed 'magical' weapon special from Elynia's staff. [B]
    - Fixed Cockatrice and Chimera not being immune to plague.  [B]

Version 1.9.4 (divergence point -> trunk):
- General:
    * Macro PLACE_UNITS_RANDOMLY fixed to cleanup internal variables
    * Macro EX_SCATTER_IMAGE fixed to cleanup internal variables
    * Macro EX_CAPTURE_VILLAGES fixed to cleanup internal variables
- Graphics:
    * New or updated unit graphics:
        + Demon Warriors
        + Demon Zephyr
    * New or updated portraits:
        + Dark Adepts (backported from trunk)
- Scenarios:
    * 06 (The Moon Valley):
        + Added missing variable cleanups
    * 07 (The Elf versus the Goliath):
        + Added missing variable cleanups
    * 10 (The Source of Light):
        + Fixed some awkward grammar
          (http://www.wesnoth.org/forum/viewtopic.php?p=305960#p305960)
    * 14 (Bye and Behold):
        + Added missing variable cleanups
    * 15 (Shadows of Time):
        + Added missing variable cleanups
    * 17 (Dawn of the Great War):
        + Added missing variable cleanups
    * 22A (Innuendo):
        + Added missing variable cleanups
        + Set turn limits
    * 22B (The Gauntlet):
        + Added a safety check, copied from scenario 22C, to ensure that
          an internal counter can never get out of range and crash the game
          (or not crash and just wrap around, which would be bad as well)
        + Added #undefs to avoid conflicting macros screwing up scenario
          23C's ("The Backyard") logic.
        + Fixed a design flaw which caused the union event to trigger once
          _for_every_side's_turn_, rather than only for the player's turn
        + Set turn limits
    * 22C (The Backyard):
        + Fixed a design flaw which caused the union event to trigger once
          _for_every_side's_turn_, rather than only for the player's turn
        + Set turn limits
    * 23A (Interim):
        + Balancing
        + Set turn limits
    * 23B (Welcome to the Lair of the Shadow Master)
        + Boss pals are spawned after terrain updates are applied
        + Renamed side 4 leader for continuity
        + Set turn limits
- Terrain:
    * Made custom trees into their own terrain types, as suggested by cycholka
- Units:
    * Balancing:
        + Elyssa/Chaos Warlord has L5 leadership rather than L4 now (this was a
          bug possibly caused by the original unit design supposed to be L4)

Version 1.9.3:
- General:
    * Fixed many incorrect file properties/metadata on SVN
- Graphics:
    * New or updated graphics:
        + Elvish Ancestor
        + Goliath
        + Lady of Light/Sylvan Faerie
        + Shadow Minion
    * New or updated portraits:
        + Aragwaith Sorceress
- Scenarios:
    * Fixed attacks_left glitch with Elynia's glamour ability (NOTE: scenario 20
      must be played again from the start-of-scenario stub save in order for the
      fix to be applied properly)
      (reported by claus)
    * Minor spelling fixes in story text and scenario dialogues
    * 02 - A Real Confrontation:
        + Give gold to enemies by side-specific income settings instead of WML events
          (suggested by zookeeper for playability)
    * 05b - Cursed Plateau:
        + Fixed a bug which rendered the Ring of Regeneration useless
          (reported by Espreon)
    * 15 - Shadows of Time:
        + Fixed stray off-map tile
    * 21 - The Heart:
        + Refactored
    * 22A (Innuendo):
        + Enabled secret scenario exit
        + Fixed a long-standing flaw which could cause prisoners
          to be spawned in the walls of the dungeon, often allowing them
          to enter still inaccessible areas of the scenario or ambush
          player enemies
        + Garg and Rhurló no longer get random traits
    * 22C (The Backyard):
        + New scenario, available as secret option at the end of "Innuendo"
    * 22A (Innuendo) to 24 (Epilogue):
        + Erathan's death no longer causes player's defeat
        + Rearranged some dialogues so they continue making sense after Erathan's
          death
- Units:
    * Fixed animation glitches on Sentry Tower
    * Fixed Shadow Minion having wrong image paths (which rendered it
      sort of invisible in-game)
    * Gave shaxthal and NPC birds special defense animations

Version 1.9.2:
- General:
    * Gave each episode a slightly different saved-game prefix
    * Optimized filesystem wrapper macros
    * Ran wesnoth-optipng:
        + (1st run) Total saved: 38 KB on 44 files
        + (2nd run) Total saved: 3 KB on 10 files
- Graphics:
    * Backported JAP's dwarvish and loyalist flag sets from mainline
      svn trunk.
    * New or updated portraits:
        + Igor (placeholder by Girgistian)
    * New or updated unit graphics:
        + Anlindë
        + Demon Grunt
        + Demon Warrior
        + Elvish Prowler
        + Elvish Trapper
        + Lady of Light/Sylvan Faerie (baseframe, ranged, melee, defense)
        + Shaxthal Sentry Drone
- Music and sound effects:
    * Removed unused battle2.ogg from music dir
- Scenarios:
    * Revised many maps for visual improvements
    * Scenario 3 - Memories from the Depths:
        + Revised map
    * Scenario 5b - Cursed Plateau
        + Revised map
    * Scenario 9 - The Library:
        + Increased turn limits by 10
    * Scenario 10 - The Source of Light:
        + Added more villages for balancing
        + Revised map
    * Scenario 14 - Bye and Behold:
        + Increased turn limit
    * Scenario 16 - Arrival of the Battalion:
        + Enemies recruit Rayblades instead of Regular Drones
        + Gave player and allies additional base income
          (this scenario was formerly supposed to be a gold-eater, but now scenario 15
           is the gold-eater...)
    * Scenario 20 - Under the Sands; end cutscene:
        + Added some fanciness to cutscene before dwarves appear
        + Fixed Elynia's and Asthorgar's canrecruit flag adjustment so that it now
          relies on boolean 'yes'/'no' rather than '0'/'1'
        + Revised map
- Terrains:
    * Fixed a typo in Ryd adjacent graphics definition which caused a horribly
      awkward (i.e. hard-edged) look due to missing (wrong) images
    * Fixed Rp^Vhc terrain not being aliased to any tile type
    * Moved mainline trunk 1.5 backports to their own files
    * New cave path terrain
- Units:
    * Balancing:
        + Decreased Elvish Warrior Spirit's melee damage from 4-4 to 3-4
        + Increased Elvish Warrior Spirit's required XP from 30 to 45
        + Changed Elvish Warrior Spirit's AI usage from "fighter" to "scout"
        + Decreased Elvish Ancestor's melee damage from 5-5 to 5-4
        + Decreased Elvish Ancestor's ranged damage from 5-3 to 3-3
        + Decreased Elvish Ancestor's required XP from 110 to 90
        + Decreased Elvish Forefather's melee damage from 6-6 to 6-5
        + Decreased Elvish Forefather's ranged damage from 7-3 to 5-3
        + Decreased Shaxthal Rayblade's HP from 44 to 36
        + Increased Elynia's resistance to fire damage from 0% to 10%
        + Increased Forest Spirit's resistance to fire damage from 10% to 20%
        + Increased Forest Spirit's defense ratio on forest terrain from 50% to 60%
        + Increased Dryad's resistance to fire damage from 10% to 20%
        + Increased Dryad's resistance to impact damage from -20% to -10%
    * Fixed animation glitches on:
        + Rock Golem (death)
        + Shaxthal Rayblade (attack)
        + Wose Shaman (standing)
    * Gave Chaos Invoker unit line explicit leadership animations, shorter than
      the lengthy implicit default
    * Made a custom unit_type for Anlindë
    * Shadow Minions are undead rather than nature spirits
    * Slowed-down Shadow Minion's death animation

Version 1.9.1a:
- Graphics:
    * Optimized - saved 286 KB on 203 files
- i18n and l10n:
    * Updated translations: French (fr)
- Scenarios:
    * Elyssa's gender is forced to 'female' (mainline bug on 1.4.x workaround)
    * Scenario 8a (Errand of Hope):
        + Got rid of emulated attack animation, now we use [animate_unit] instead
- Units:
    * Changed some units' translatable names to avoid redundance now that races are displayed
      in the sidebar

Version 1.9.1 (not released):
- General:
    * Pick-up item toolkit:
        + Allow a descriptive message about the item to be displayed before choosing whether
          to take it or not with primary_unit; for the silent behavior, PICK_UP_QUIET is provided.
    * Set correct file properties in SVN for branches/1.4
- Graphics:
    * Imported mesilliac's new stone wall terrain graphics from mainline SVN trunk
    * New or updated portraits:
        + Elynia [place-holder]
        + Erathan [place-holder]
        + Mal Hekuba [place-holder]
    * New or updated terrain graphics:
        + Converted Dark Hive pit tiles into overlays
        + Dark Hive (and transitions)
        + Dark Hive - surface (and transitions)
        + Dark Hive - boss lair (and transitions)
        + Dark tile road transitions
        + Wasteland
    * New or updated unit graphics:
        + Chaos Lore
        + Chaos Magus
        + Chaos Warlord
        + Elvish Warrior Spirit
        + L1 Demon
        + Lady of Light / Sylvan Faerie (baseframe, new stationary halos)
        + Psy Crawler (new death animation)
        + Psy Mindraider
        + Shadow Courier
        + Shaxthal Assault Drone
        + Shaxthal Drone
        + Shaxthal Larva
        + Shaxthal Master Drone / Chaos Emperor
        + Shaxthal Protector Drone
        + Shaxthal Runner Drone
        + Shaxthal Wyrm
    * Removed graphics:
        + Big Lizard
    * Replaced Raelthyn landscape pictures with higher quality versions
- Music and sound effects:
    * New or updated music tracks:
        + battle2.ogg ("Untitled", by Doug Kaufman)
    * New or updated sounds:
      union-[1-4].ogg, shaxthal-roam-[1-2].ogg, bot-small-explosion-4.ogg,
      shaxthal-die-[1-4].ogg, gun-energy-huge-fire-prelude.ogg, shaxthal-hit-4.ogg,
      lava.ogg, glyph-powerup.ogg
- Scenarios:
    * Allow player to undo last unit movement after reading most message glyphs
    * Episode system when starting from episode 1:
        + Gold is not ignored when entering episode 2. Instead, a fraction of it is
          carried if that fraction's amount is larger than certain minimum values set
          for scenario 14:

          Easy:   95%, if it is greater than 300
          Normal: 75%, if it is greater than 275
          Hard:   50%, if it is greater than 250

        + Recall list is no longer purged when entering episode 2
    * Fixed several glitches in the recruitment setup for scenarios 16 and 17
    * Made all bosses leaders (canrecruit=yes)
    * Made it possible for all Elvish Archers (L1-L3) to take the Enchanted Poisonous Bow.
    * Many scenario/map cosmetic changes that are not listed here
    * Many storyline/plot changes that are not listed here
    * Prose-doctoring by ESR
    * Scenario 2 (A Real Confrontation):
        + Increased ally's income and gold as suggested by players
        + Increased turn limits for testing
    * Scenario 4 (Over the Sands):
        + Dehydration system should ignore Faerie Spirits or any unit with
          the not_living status set to 'yes'.
    * Scenario 5a (Crossfire):
        + Made loyalists significantly more aggressive
    * Scenario 7 (The Elf versus Goliath):
        + Converted pick-up objects to use the new toolkit
        + Don't spawn loyal undead units for player at start
        + Set a turn limit as suggested by players
    * Scenario 8a (Errand of Hope):
        + Changed internal id.
    * Scenario 9 (The Library):
        + Objective is now to go *STRAIGHT* south >:-/
    * Scenario 10 (The Source of Light):
        + Mal Keshar's detection of glyphs requires 3 relax turns now
        + Replaced map with a new and shorter one
    * Scenario 11 (Strike on New Knalga):
        + Increased turn limits
        + New surprises added - made it harder
    * Scenarios 12 and 13 (The Escape, Face your Fate):
        + Fix a flaw which allowed to recruit/recall units in scenario 12
          by moving some WML around
    * Scenario 14 (Bye and Behold):
        + Balancing
        + Fixed a wrong unit id in enemy recruitment list
    * Scenario 15 (Shadows of Time):
        + Added definitive scenario
    * Scenario 18 (Voices of the Armageddon):
        + Refactored and renamed; does not affect internal id.
    * Scenario 19 (Legend of Wesmere):
        + Renamed (was "Wesmere"); affects internal id.
        + Workaround/fix a bug which caused shaxthal recruits not to have the surface
          flag set
    * Scenario 21 (The Heart):
        + Cast eternal darkness in this map
    * Scenario 22-A (Innuendo):
        + Added missing TC to one of the prisoners' icon
        + Balancing
        + Converted pick-up objects to use the new toolkit
        + Fixed a glitch which would disallow continuing to next scenario
          if one of the prisoners (not Lédinor) died before setting free the
          other one
        + Matrix parts are no longer idle NPCs
    * Scenario 22-C (The Backyard):
        + Started development of this secret scenario
    * Scenario 23-A (Interim):
        + Units are recalled since the beginning now
    * Scenario 23-B (Welcome to the Lair):
        + Balancing
        + Give the player some gold and a minimal recruit list at the start,
          but don't allow them to recall arbitrary units anyway
    * Scenario 23-C (Broken Heart):
        + Reduced turn limit by one unit
    * Scenario 24 (Epilogue):
        + Extended plot for sequel
    * Standard user_team_name added on scenarios 11-24 player
      declarations
    * Skeleton line and Skeleton rider lines can take the Void Armor too
- Terrain WML:
    * Back-ported mesilliac's new stone wall terrain from mainline SVN trunk
    * Dark road transitions should now behave very much like mainline road (Rr)
      (i.e. no longer used over cave, snow, hills and other terrain tiles)
    * Fixed the too-angular-hexes glitch in all custom terrains with transitions;
      it was mistakenly setting custom precedence only for 1-tile transition, thus the
      others were being opaqued by mainline terrain
    * Fixed glitches in abyss transitions
    * Made Dark Hive pits an overlay instead of tile (affects both WML and graphics)
    * New terrains:
        + Dark Hive - illuminated
        + Dark Hive - surface variation
        + Dark Hive pits - boss lair variation
        + Dark Hive pits - surface variation
        + Water gate (SE and SW facing)
    * Optimized some transitions
    * Renamed terrains:
        + Yrh -> Yr^Xp
- Units:
    * Balancing:
        + Reduced regular Drone's recruitment cost from 17g to 11g
        + Reduced Runner Drone's recruitment cost from 18g to 15g
        + Increased Shadow Master's resistances to various damage classes
        + Balancing of variable costs for Elvish Shaman and Civilian
          (i.e. made cheaper) 
        + Reduced Union's damage from 42-3 to 24-2
        + Decreased Elvish Warrior Spirit's HP from 20 to 18
        + Increased Elvish Warrior Spirit's recruitment cost from 21 to 22
        + Decreased Elvish Ancestor's HP from 27 to 25
        + Decreased Elvish Forefather's HP from 38 to 35
        + Changed Aragwaith Slayer's alignment from 'lawful' to 'neutral', HP from 39 to 45
        + Removed Shadow Spawn's ranged attack
        + Removed poison special from Abomination's melee attack
        + Fixed WML code preprocessing order so that {TRAIT_SPIRIT} exists by the
          time it is included in Faerie Spirit's code
        + As a result of the above, now Faerie Spirits receive the Spirit trait forcedfully
          as intended (it was silently failing)
    * Fixed animation glitches of Elvish Civilians
    * New or refactored units: Shaxthal Larva, Shaxthal Rayblade
    * Refactored/optimized/fixed animation WML for all Aragwaith units except:
        + Silver Shield, Shield Guard, Sorcerer
    * Work-around the animation interim delay caused by the Terror ability on the elvish
      spirits line (note: this does not fix the missing damage labels - that is from the
      engine side)

Version 1.9.0:
- AIs:
    * Added formula/darkhive-drone.ai (untested and not to be used on 1.4)
- General:
    * Bump version from 1.0.14 to 1.9.0
    * Made it easier to update version numbers in the future, though it makes the presence
      of file tags/VERSION.tag mandatory
    * Ran wmllint; the units/ directory is still begging for manual fixes. However, the
      WML of the campaign overall should be now clean enough to allow for easy migration
      to SVN trunk with wmllint
    * Refactored item pick-up mechanism, making it easier to maintain, and easier
      to use from the player's side; it is also guaranteed that all of them can be
      used only once
    * Removed unused macros:
        + PLACE_IMAGE_WITH_HALO @ utils/items.cfg
- Graphics:
    * New or updated portraits:
        + Elynia, place-holder (slight recoloring of LoW's new Cleodil portrait) <kitty>
        + Lédinor, place-holder (LoW's new Velon portrait) <kitty>
    * New or updated unit graphics:
        + Demon - level 1 <Shadow Master>
        + Dread Bat baseframe <megane>
        + Strongbow <Shadow/wayfarer>
- i18n and l10n:
    * Added to SVN the translations directory
    * Internationalized player team names in many scenarios
    * Moved utils/mainline-strings.cfg to top-level and made it be included first in the
      preprocessor chain
- Maintenance toolchain:
    * Moved from /branches/1.4/Invasion_from_the_Unknown/bin to /branches/maintenance-toolchain
- Scenarios:
    * Made it possible to play first 13 scenarios and/or last 13 scenarios independently:
        + Playing Episode I allows player to select whether he or she desires to continue
          playing with Episode II at the end
        + Playing Episode II gives the player a default set of heroes
    * Minor cosmetic improvements to existing maps
    * Scenario 1 (Border Patrol):
        + Balancing
        + Standard user_team_name added
    * Scenario 2 (A Real Confrontation):
        + Enemies' gold reserves are increased whenever they drop below 30 at the beginning of
          their turn
        + Increased the amount of gold gained by enemies when they pillage villages
        + Removed left-over time area
        + Standard user_team_name added
    * Scenario 3 (Memories from the Depths):
        + Balancing
        + Mal Keshar no longer has {TRAIT_FEARLESS}
        + Renamed ("Horrors from the Depths")
        + Standard user_team_name added
    * Scenario 4 (Over the Sands)
        + Balancing
        + Dehydration enabled for lowest difficulty level
        + Standard user_team_name added
    * Scenario 5a (Crossfire)
        + Balancing
        + Fixed Ring of Regeneration's unit filter to allow humans (i.e. Dark Adepts)
          to pick it up
        + Reduced turn limit for balancing
        + Standard user_team_name added
    * Scenario 5b (Cursed Plateau)
        + Added the missing scenario WML prestart commands, i.e. now player unit costs
          get properly modified, and Dark Adepts are made recruitable
        + Fixed Ring of Regeneration's unit filter to allow humans (i.e. Dark Adepts)
          to pick it up
        + Reduced turn limit for balancing
        + Standard user_team_name added
    * Scenario 6 (Moon Valley)
        + Balancing
        + Standard user_team_name added
    * Scenario 7 (The Elf versus Goliath)
        + Standard user_team_name added
    * Scenario 8 (Errand of Hope)
        + Death Knights can pick up the Magic Poisonous Bow too
        + Reduced turn limit for balancing
        + Standard user_team_name added
    * Scenario 9 (The Library)
        + Reduced turn limit for balancing
        + Standard user_team_name added
    * Scenario 10 (The Source of Light)
        + Defined a turn limit for balancing
        + Fixed (FOR REAL) a bug which caused Mal Keshar to search for the glyphs
          continuously (reported by Sky)
        + Standard user_team_name added
    * Scenario 14 (Bye and Behold)
        + Changed Erathan's level from L3 to L2
        + Defined a turn limit for balancing
    * Scenario 23-C (Broken Heart part 1):
        + Lédinor no longer gets lost; i.e. he gets teleported to the
          second half of the map with the party
    * Scenario 23-C cutscene (Broken Heart part 2):
        + Map borders get replaced with abyss tiles too
- Units:
    * Balancing:
        + Decreased Dread Bat's HP from 43 to 33
        + Increased required XP to advance for Blood Bat from 60 to 70
        + Gave {ABILITY_REGENERATES} to Dread Bat
        + Gave mandatory {TRAIT_FEARLESS} to Elvish Warrior Spirit line
        + Set Elvish Warrior Spirit line movement type to 'undeadspirit'
          > override resistances: arcane -20% (def. -10%)
          > override defenses: cave 60% (def. 50%)
        + Increased Elvish Warrior Spirit's HP from 19 to 20
        + Increased Elvish Forefather's HP from 36 to 38
        + Set Faerie Spirit movement type to 'undeadspirit'
          > override resistances: fire 0% (def. 10%), arcane -20% (def. -10%)
          > override defenses: cave 60% (def. 50%)
        + Gave mandatory {TRAIT_SPIRIT} to Faerie Spirit
    * Fixed many level-1 units not switching to ZoC ellipse after advancing from level 0
    * Fixed many units which were using inexisting macro WEAPON_SPECIAL_DRAINS
      instead of WEAPON_SPECIAL_DRAIN
    * Made Door unit clean-up after custom death event handler
    * Renamed the Kagthanii race to "Verlissh" (suggested by ESR, Aethaeryn)

Version 1.0.13:
- Graphics:
    * wesnoth-optipng ran on root; saved 53 KB on 70 files
- i18n and l10n:
    * Added missing translations (spanish, turkish, italian, french)

Version 1.0.12:
- AIs:
    * Decreased caution level for hostile nature players from 10% to 0%
    * Shaxthal Wyrm can take on the Bird NPC behavior
    * NPCs are killed to prevent going out of map bounds now triggering any
      associated events; this should allow the respawn control algorithm to
      respawn NPCs as desired
- General:
    * Mainline WML conventions / engine changes:
        + Changed all usages of [terrain] letter= to use [terrain] terrain=, since the former
          syntax will be deprecated in 1.5.x and makes little sense with the 1.3 terrain system
- Graphics:
    * Added graphics:
        + 2 scenery tree variations by Meniou
        + 2 new variations of scenery gibs
        + Elvish Hunter - melee attack and defense animation frames (male, female)
        + Elvish Hunter - ranged attack and defense animation frames (male, female)
        + Generic camp
        + Rain effect (previously removed)
        + Shadow Courier
        + Shadow Spawn
        + Storyline "big warning" graphic (from Tango icon theme)
    * Changed campaign menu entry's icon
    * New campaign menu entry's splash screen (from kitty's story graphics)
    * Updated unit graphics:
        + Abomination
        + Bone Knight
        + Lady of Light
        + Skeletal Rider
        + Death Baron
        + Loyalist Man at Arms (by Neoskel, for Blueblaze's secret RPG)
    * Updated item graphics:
        + Berries
        + Bookshelves
        + Touchplate
    * Updated place-holder portraits:
        + Elynia
        + Erathon
    * Updated terrain graphics:
        + Dark Castle floor
    * Updated storymap graphics
- Scenarios and gameplay:
    * Added a start-of-campaign warning message
    * Replaced storymaps' player icon with a "generic" elven unit to avoid awkwardness
      until variable substitution in Story WML can be done.
    * Scenario 1 (Border Patrol):
        + Balancing
        + Minor visual improvements
    * Scenario 2 (A Real Confrontation):
        + Fixed a silent engine error, "audio: Tried to add duplicate track"
    * Scenario 4 (Over the Sands):
        + Fixed victory clean-up missing some variables
    * Scenario 5a, 5b:
        + Missing victory clean-up added to Scenario 6 as a prestart event
    * Scenario 8a (Errand of Hope):
        + Fixed typo which generated the 'unknown unit' error ('Troll Rcoklobber' should
          be 'Troll Rocklobber')
        + Fixed victory clean-up missing some variables
    * Scenario 9 (The Library):
        + Clarified objectives
    * Scenario 10 (Source of Light):
        + Fixed a bug which caused Mal Keshar to search for the glyphs continuously
          (reported by Sky)
    * Scenario 17 (Dawn of the Great War):
        + Fixed victory clean-up missing some variables
    * Scenario 20 (Under the Sands):
        + The player now gets a bonus for finishing the scenario
    * Scenario 22-A (Innuendo):
        + Made AI significantly more aggressive towards the player
        + Minor cosmetic improvements
    * Scenario 22-B (Gauntlet):
        + Added aggressive NPCs
        + Elyssa respawns in a known location to avoid respawning in lava hexes
    * Scenario 23-A (Interim):
        + Added aggressive NPCs
    * Scenario 23-B (Welcome to the Lair):
        + Added aggressive NPCs
        + Addressed a minor grammatical issue
        + Fixed invalid reference to next scenario in cutscene
    * Units killed by the Shadow Master now cannot be resurrected by Mal Keshar
- Terrain WML:
    * Clean-up of code as suggested by MadMax
- Units:
    * Added missing Obscure halo to Master of Darkness
    * Balancing:
        + Removed Dread Bat's feeding ability; and increased HP from 36 to 43
        + Backported AMLA_DEFAULT fix to heal/unslow from mainline SVN trunk, for Elynia's AMLAs
        + Increased cavewall defense for Shaxthal Wyrm from 40% to 50%
        + Decreased Chaos Lore's "ethereal blast" from 11-4 to 9-4
        + Decreased Chaos Lore's "infernal chill" from 17-2 to 13-2
        + Changed Chaos Lore's melee attack from 8-1 to 7-2
        + Changed default AMLA for Lady of Light and Sylvan Faerie from AMLA_DEFAULT to
          AMLA_FULLHEAL_AND_ENHANCE_HP (just a cosmetic change to make AMLA icon consistent with
          custom AMLAs, but it also backports a SVN trunk change for Wesnoth 1.4.x)
    * New or refactored units: Shadow Spawn, Shadow Courier
    * Optimized WML: alt. Dark Sorcerer, alt. Necromancer

Version 1.0.11:
- General:
    * External archive packaging script gracefully handles svn checkouts now
      (update to version 0.3.0)
- Graphics:
    * Removed alternate signpost (no longer required since it was commited to
      mainline trunk and branches/1.4
    * Updated baseframes by Neoskel and Megane:
        + Chaos Invader line except Overlord
- Scenarios and gameplay:
    * Scenario 10 (The Source of Light):
        + Make usage of southern touch-plates less confusing

Version 1.0.10:
- General:
    * Added directory hierarchy for Python and Formula AI that might be written later
    * Moved from localhost (greycore) non-versioned storage to SourceForge.net
      (SVN)
    * Ran wesnoth-pngcrush over inner root
      > total saved: 3 KB, 3 files
    * Removed translator entries from about.cfg as suggested by Ivanovic
- Graphics:
    * Updated place-holder portrait for Galas
- Music and sound effects:
    * Victory and defeat music also replace existing playlist with silence
- Scenarios and gameplay:
    * All hive spawn points are aware of the surface-variation flag
    * Scenario 10 (The Source of Light) (fixes a couple of bugs reported by Soliton):
        + Any unit can take the Berserker Potion
        + Mal Keshar is respawned with his real maximum HP
- Units:
    * Removed units: Troll Shaman

Version 1.0.2:
- General:
    * Added BUGS.txt, which lists known bugs/by-design oddities and contains
      instructions for reporting new ones.
    * Initiated string-freeze on existing scenarios to allow ESR to work with them
    * Ran wesnoth-pngcrush over inner root
      > total saved: 2 KB, 2 files
    * Set translation flag to 'true' on _server.pbl
- Graphics:
    * Restored animation frames:
        + Chaos Invader
        + Chaos Dark Knight
        + Chaos Hell Knight
    * Updated animation frames:
        + Chaos Invader: defense, attack (1)
    * Updated baseframes:
        + Elvish Guard
    * Updated place-holder portrait for Elynia (thanks Kitty for providing
      a high-resolution PSD)
- Music and sound effects:
    * Added ambient_campfire.ogg from Blueblaze's [sound_source] test add-on
    * Sad music (sad.ogg) gets played on character death events
- Scenarios:
    * Renamed character Analia to Anlindë (ESR's suggestion)
    * Scenario 16 ("Arrival of the Battalion"):
        + Added campfire continuous sound sources
- Units:
    * Changed Chaos Dark Knight's advanceto value to a valid unit type id
    * Renamed units:
        + Elvish Guard -> Elvish Protector
        + Hell Knight -> Chaos Razerman

Version 1.0.1:
- General:
    * Fixed {NPC ...} macro, which was not spawning units due to a call to
      inexistent macro RANDOM_TRAIT_UNIT; this fixes, at least, missing NPCs in
      scenario 14 (bye and behold)
    * Ran wesnoth-pngcrush over inner root
      > total saved: 0 KB, 3 files
    * Solved the frequent problem of macro parameters order for once and for all
      (caused by too many convention changes that occur from the night to the morning
       in trunk pre 1.4.0 and related tagged releases)

      LOYAL_UNIT -> EX_LOYAL_UNIT
      UNDEAD_UNIT -> EX_LOYAL_UNDEAD_UNIT
      UNIT -> EX_LOYAL_UNIT
- Graphics:
    * Changed Galas' portrait scale
- Music and sound effects:
    * Added track: (Northern Rebirth) Sad music - by West
    * Merged music from IftU Soundtrack package into the campaign
    * Removed wesnoth-battle-2.ogg (duplicate of mainline knalgan_theme.ogg)
    * Removed the-city-falls.ogg (duplicate of mainline the_city_falls.ogg)
    * Removed gameplay06.ogg (references replaced with mainline nunc_dimittis.ogg)
- Scenario:
    * Many scenarios now use "dynamic music"; suggested indirectly by West on IRC
    * Made boss scenarios not to hardcode their music playlist
    * Restored scenario 15 (placeholder)
      This invalidates saved games of 1.0.0 >= versions > 0.11.0 in the range of scenarios
      "The Aragwaithi" (cutscene) - Epilogue
    * Scenario 14 ("Bye and Behold"):
        + Balancing
    * Undead rise-up system now takes advantage of 1.4.0's fix to bug #10926
- Terrain WML:
    * Campfire tiles are no longer impassable terrain aliases
    * Fixed small typo which caused campfire animations not to display at all
- Units:
    * Mystic fire animations should match Extended Era x.33.0 now
    * New units: Bear, Giant Boar

Version 1.0.0:
- General:
    * Bump version

Version 0.99.103 (1.0 RC 3 2008-03-03) <NOT PUBLISHED>:
- General:
    * Ran wesnoth-pngcrush over inner root
      > total saved: 107 KB, 109 files
      Wow, the GIMP seems to be spewing out piggy PNGs lately ;-)
- Graphics:
    * Fixed a TC glitch in Mechanical Goliath's melee attack frame
    * Portraits (placeholders):
        + Faerie Dryad (gen.): Copied kitty's Elvish Druid portrait (mainline) as of
          trunk r23987, scaled down to 205x205, and added border
    * Removed some deprecated animation frames of units which got their
      baseframes dramatically modified; they must be redrawn from scratch;
      the WML will not be updated yet and will not reflect this change

Version 0.99.102 (1.0 RC 2 2008-03-02) <NOT PUBLISHED>:
- General:
    * Updated credits screen
- Graphics:
    * Maps:
        + Increased quality (and size!) of episode-specific story maps
    * Units:
        + Updated baseframes: Hell Guardian
- Music and sound effects:
    * Added proper Vorbis tags to: gameplay06.ogg, the-city-falls.ogg, snowfall.ogg
- Scenarios:
    * Face your Fate (13):
        + Balancing
        + Modified some dialogues
        + Updated map
    * Bye and Behold (14):
        + Balancing
        + Due to popular demand, Woses are no longer a recruitment option for
          player
        + Modified some dialogues
        + Updated map
- Terrain:
    * Fixed many glitches originated between Wesnoth 1.3.15 and 1.3.18 related
      to our custom transitions and the predefined Chasm (Q*) graphics.
    * Optimized, polished.

Version 0.99.101 (1.0 RC 1) <NOT PUBLISHED>:
- C++:
    * Fixed a bug which caused portraits of units with different profiles for male and female
      genders not to be updated properly on females (to be exported to trunk/1.4 branch)
- General:
    * Bump version to 1.0
    * Ran wmllint on /
    * Fixed issues caused by a change in the LOYAL_UNIT macro parameters' order
      after Wesnoth 1.3.1
      (reported by "Glass Pearl Player" et al)
    * Made various floating labels' text unit gender-specific
- Graphics:
    * Portraits (placeholders):
        + Elynia: Copied kitty's Elvish Shaman portrait (mainline) in order to ease later
          replacement when a non-placeholder portrait is made; unit's WML updated accordingly
        + Analia: Copied kitty's Elvish Lady portrait (mainline) to while we get a definitive portrait
          that fits the character's profile
        + Analia: Removed old JPEG placeholder
    * Units:
        + Updated baseframes: Minor Imp, Imp, Lady of Light/Sylvan Faerie, Chaos Soulhunter, Chaos Invader,
          Demon Zephyr
- Music and sound effects:
    * Merged the /music directory for release 1.0
- Scenarios:
    * Fixed a flaw which didn't trigger defeat when King Asthorgar would die
      (reported by docrock)
    * Horrors from the Depths (3):
        + Removed evil trap
    * Over the Sands (4):
        + Dehydration is back with a new, custom and simpler algorithm
          (NOTE: there is no dehydration on Easy difficulty setting)
        + Revised map
    * Crossfire (5A):
        + Allowed faeries to take the ring
        + Allowed the player to regret and choose other unit to pick up the ring
    * Cursed Plateau (5B):
        + Remade map and finished coding
    * Fixed a "map not found" bug with "The Aragwaithi", which seems to have been present since
      before last official release
    * Removed "Dealing with Orcs" (15-16)
    * Interim (22A):
        + Made all enemies significantly more aggressive towards the heroes
    * Welcome to the Lair (22B):
        + Refactored
- Units:
    * Attack animations for the Runesmith line should work now (attack
      filter was not matching anything)
    * Balancing:
        + Elynia's AMLAs fully heal her
        + Decreased Demon Zephyr's ranged attack strength from 8-3 to 7-3
        + Gave Bone Knight a ranged 10-1 crossbow (pierce) attack
        + Set resistances for non-winged demons:
            fire: 0% (was 50%)
        + Set resistances for winged demons:
            fire: 20% (was 50%)
        + Set resistances for all demons:
            cold: -10% (was 50%)
        + Tweaked resistances on the whole Imp line
    * Elvish Civilian's advancements depend on the unit's gender:
        + female: Elvish Shaman, Elvish Archer, Elvish Hunter
        + male: Elvish Fighter, Elvish Archer, Elvish Hunter
        (reported by masaber2)

Version 0.11.990 <NOT PUBLISHED>:
- Units:
    * Fixed a flaw in the variable-cost units mechanism which caused Elvish
      fighters and scouts not to receive the additional L2 advancement in later
      scenarios when freshly-recruited
      (reported by Xargon)

Version 0.11.0 <unofficial release>:
- Maintenance and framework:
    * Code style:
        + wmlindent was run; made sure blocks whose functionality would break
          if indented are always ignored
    * cron job will name backup archives according to the campaign's version tagfile contents
    * Maintenance utilities moved to /bin directory, which shall be excluded from campaign server uploads
    * New maintenance tools:
        + build-external-archive.sh, which can automatically generate XDeltas between
          versions, and strip down ignored files from packages
          May be based on the assumption that the maintainer runs GNU sed, Bash and GNU coreutils
    * Optimized all maintenance suite scripts
    * Tag files moved to /tags directory
    * Translations maintenance utilities moved to /bin directory, which shall be replicated at svn repository
    * WesCamp-i18n tree won't use the automatic updates of the new campaign server to avoid overriding ESR's changes
      on SVN
- General:
    * Added documentation:
        + {SPAWN_BOSS_UNIT} (for future maintainers)
    * Bump version:
        + 0.10.1 -> 0.11.0
    * Campaign menu entry:
        + Set rank to 255 (Expert tier)
        + Campaign's level is now "expert"
    * Core macros:
        + Implemented percentage calculation macros
        + Implemented DO-WHILE block
        + Moved TC/RC declarations to a top-level WML file, ensuring that they are preprocessed
          early enough
    * Engine requirement:
        + 1.3.14 (mandatory, as it's the first beta for 1.4)
    * NPC movement algorithms:
        + {NPC_BIRD_BEHAVIOR} has been optimized in such way that it can be used
          inside an event and not only at [scenario] top level (i.e. for modifying a side's
          NPC behavior on the fly)
    * Removed compatibility code for Wesnoth 1.3.11-1.3.13:
        + /: {USE_L3_OUTLAWS} injection
        + /utils/amla.cfg: {AMLA_DEFAULT}
        + /utils/special_notes.cfg: {SPECIAL_NOTES}, {SPECIAL_NOTES_FEEDING}, {SPECIAL_NOTES_GROWTH}
    * Time of Day schedules:
        + Removed spurious textdomain= statements
- Graphics:
    * Added graphics:
        + Standard terrain transitions for Dark Hive terrain class (Y*)
        (GIMP's "lighten only" layer mode of dark hive base tile over
        Uu cave transition graphics)
        + Death Baron:
            o death-baron-crossbow.png
            o death-baron-crossbow-attack1.png
            o death-baron-crossbow-attack2.png
            o death-baron-defend.png
        + Lady of Light:
            o lady-of-light-defend.png
            o lady-of-light-magic.png
            o lady-of-light-attack1.png
            o lady-of-light-attack2.png
            o lady-of-light-attack3.png
    * Removed graphics:
        + Shaxthal Drone
        + terrain/windmill-*.png (mainline duplicate)
        + various deprecated Aragwaith units' animation frames that clashed with the new ones
    * Updated graphics:
        + Dread Bat (using Jetryl's Blood Bat anim. frames as placeholder)
        + Obscures aura
        + Death Baron
        + Hell Knight
        + Dark Hive pits (5 new variations)
        + Dark Lair tile
        + Aragwaith Captain (shadow upd. by Shadow Master, anim. frames by Wayfarer)
        + Aragwaith Warlock <male, female> (shadow upd. by Shadow Master, anim. frames by Wayfarer)
        + Aragwaith Wizard <male> (shadow upd. by Shadow Master, anim. frames by Wayfarer)
        + Aragwaith Sorcerer <male> (shadow upd. by Shadow Master, anim. frames by Wayfarer)
        + Aragwaith Swordsman (shadow upd. by Shadow Master, anim. frames by Wayfarer)
        + Aragwaith Ancient Banner <male> (shadow upd. by Shadow Master, anim. frames by Wayfarer)
        + Skeletal Rider
        + Bone Knight
        + Master of Darkness
- Language, i18n and l10n:
    * Did some textdomain layout optimization on /utils/items.cfg and /utils/glamour.cfg; in particular,
      set wesnoth-lib textdomain for strings "Cancel", "Yes" and "No", instead of our own, so that they
      are translated as standard GUI elements and not as part of this campaign
    * Made all UtBS schedules on /utils/schedules.cfg be under this campaign's textdomain effect
    * Updated translations:
        + French (Zoltic):
          (nil)
        + Italian (Brivido):
          (nil)
        + Spanish (Shadow Master):
          1956 translated messages, 0 fuzzy translations, 620 messages not translated yet
- Scenarios:
    * Implemented workaround on Analia's spawning code and Elynia's (scenario #10, and E4 boss)
      that enforces gender= on them to be the correct one. Wesnoth 1.3.14+svn r23135 seems not to use unique gender=
      statements in UnitsWML and copy them onto spawned single units unless explicitly asked. The result is pretty awkward
      now that unit's race can be translated even for singular forms, and display on the unit stats panel ;)
    * Reestructuration:
        + Removed scenarios:
            o (19) Infested Pass
            o (21) E3 Boss (moved to 19)
            o (23) Lands of Chaos
    * Scenario 3:
        + Fixed typo in a dialogue line
    * Scenario 10:
        + Elynia's name is translatable as it should have always been (i18n bug)
    * Scenario 18 "The Dawn (...)":
        + Fixed all legacy bugs:
            o duplicated enemy leader identifiers
        + Remade map and WML, embedding the plot of old scenario 19 inside
    * Scenario 19:
        + Replaced with scenario 21, made E3 Boss scenario
    * Scenario 21:
        + Elynia's hero icon is removed temporarily, to avoid overlapping the canrecruit=1 crown
        + Now Elynia glows in a golden tone when she touches the special glyph
        + Revised map
        + Revised scenario's gameplay
    * Scenario 21 - 22 Interlude:
        + Fixed a map flaw which could cause a hero to be recalled on a water tile
    * Scenario 23A (Innuendo):
        + Fixed a bug which caused the dungeon prisoners to be spawned whenever an unit moved
          onto their locations
    * Scenario 23B (Gauntlet):
        + Elyssa can't attack a second time when respawned during her own turn
    * Scenario 24B:
        + Fixed a bug which caused enemy waves to be spawned for the rest of eternity
        + Modified Death Knight summoning logic
- Shadow Master's standard macro infrastructure:
    * Internal macros:
        + Render WML:
            o __RC_PALETTE should declare new palletes properly now
- Terrain WML:
    * Fixes to double terrain aliasing:
        + Made campfire terrains be aliases of a root terrain, "Xu"
          (they were aliases of "Mm^Xm formerly)
        + Made phantom castle "Uu^Cd" be alias of a root terrain, "Ch" (was "Cud" formerly)
        + Made phantom keep "Uu^Kd" be alias of a root terrain, "Ch" (was "Kud" formerly)
        + Made road "Ryd" be alias of a root terrain, "Gg" (was "Rr" formerly)
    * Rearranged some transitions order to produce a consistent appearance
    * Removed Gg^Vwm (Windmill/Village) as per conversation with zookeeper
    * Renamed campfire's string "^Fi" to "^Fy" to revent future conflicts with mainline
- Units:
    * Abilities:
        + Glamour option is not offered on known "chasm" or "cavewall" terrains to
          avoid "getting stuck" at the unit's location after changing to a status that
          has no movement on those tiles
    * Balancing:
        + Increased required XP for advancement of Blood Bat to Dread Bat from 42 to 60
        + Increased Tiger's resistance to arcane damage from 0% to 10%
        + Decreased Cockatrice's resistance to arcane damage from 20% to -50%
        + Decreased Chimera's resistance to arcane damage from 20% to -50%
        + Decreased Shaxthal Drone's HP from 35 to 28
        + Decreased Assault Drone's HP from 47 to 42
        + Decreased Sentry Drone's HP from 51 to 46
        + Removed Marksman special from Fire Spirit's ranged attack
        + Decreased Fire Wisp's ranged damage from 6-2 to 4-2
        + Changed Fire Spirit's ranged damage from 8-2 to 6-3
        + Kagthanus Flow System Tube and Kagthanus Matrix Core can no longer receive random traits
    * Gave Sleeping Gryphon the missing "awake" animations ;)
    * Mainline conformance:
        + Death Baron:
            o Added a 5-2 ranged attack (pierce)
            o Increased hitpoints from 54 to 55
            o Increased required leveling experience from 90 to 100
            o Reduced number of melee strikes by one
            o Renamed melee attack from "sword" to "axe" (suggested by Jetryl and Eternal)
            o Updated special notes conventions
    * New or refactored units:
        + Kagthanus Matrix Core (fixed all animation glitches except on-select by using a more
          complex set of masked halo and baseframes; HP and XP bars should always display properly now
        + Kagthanus Matrix Flow System
    * Optimized filtering on variable-cost elvish units, therefore fixing a bug that caused them
      to be excluded from certain Standard Unit Filter, specially those used for special objects
    * Shaxthal datafiles have had their "alien" prefix removed for continuity
    * Removed units:
        + Shaxthal Drone
    * Renamed units:
        + Blood Knight -> Hell Knight

; kate: indent-mode normal; encoding utf-8; space-indent: on;
